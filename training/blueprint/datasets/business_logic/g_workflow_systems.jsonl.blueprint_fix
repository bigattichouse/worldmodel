{"id": "blueprint_biz_140", "category": "workflow_systems", "difficulty": "intermediate", "user_query": "Training material workflow", "response": "<thinking>\nPROBLEM UNDERSTANDING:\n- A system to manage the creation, review, and deployment of training materials.\n- Similar to content publishing, but specifically for educational content with versions and target audiences.\n\nSTRATEGIC APPROACH:\n- Design a `TrainingMaterialService`.\n- Define `TrainingModule`, `TrainingVersion`, and `Audience` entities.\n- Implement a workflow with methods for creating modules, publishing versions, and assigning to audiences.\n\nDESIGN PREPARATION:\n- `TrainingModule` data model (moduleId, title, description, creatorId, status: Draft/Reviewed/Published).\n- `TrainingVersion` data model (versionId, moduleId, contentUrl, versionNumber, publishDate).\n- `TrainingMaterialService` with methods: `createModule`, `submitForReview`, `publishVersion`, `assignToAudience`.\n- `TrainingModuleRepository` and `TrainingVersionRepository` for persistence.\n- Integration with `UserService` and `ComplianceTrainingService`.\n- Error handling for `ModuleNotFound`, `VersionNotFound`, `UnauthorizedAccess`.\n</thinking>\n\n<blueprint>\nService TrainingMaterialService {\n  description: \"Manages the creation, review, and deployment workflow for training materials.\",\n  dependencies: {\n    moduleRepo: TrainingModuleRepository,\n    versionRepo: TrainingVersionRepository,\n    userService: UserService\n  },\n  methods: {\n    createModule(creatorId: UUID, title: string, description: string) -> TrainingModule {\n      preconditions: [creatorId exists, title and description not empty],\n      postconditions: [a new training module is created with 'Draft' status],\n      errors: [UserNotFound, InvalidInput]\n    },\n    submitForReview(moduleId: UUID, submitterId: UUID, reviewerId: UUID) -> TrainingModule {\n      preconditions: [moduleId exists, submitterId has authority, status is 'Draft', reviewerId exists],\n      postconditions: [module status changes to 'PendingReview', assigned to reviewer],\n      errors: [TrainingModuleNotFound, UnauthorizedAccess, InvalidStatusTransition, ReviewerNotFound]\n    },\n    publishVersion(moduleId: UUID, publisherId: UUID, contentUrl: string, versionNumber: string) -> TrainingVersion {\n      preconditions: [moduleId exists, publisherId has authority, module status is 'Approved', contentUrl is valid],\n      postconditions: [a new version of the training module is published, status may change to 'Published'],\n      errors: [TrainingModuleNotFound, UnauthorizedAccess, InvalidStatusTransition, InvalidInput]\n    },\n    assignToAudience(versionId: UUID, audienceType: string, audienceIds: array[UUID]) -> TrainingVersion {\n      preconditions: [versionId exists, audienceType is valid],\n      postconditions: [the training version is assigned to the specified audience (e.g., roles, departments)],\n      errors: [TrainingVersionNotFound, InvalidAudienceType]\n    }\n  }\n}\n\nService TrainingModuleRepository {\n  methods: {\n    save(module: TrainingModule) -> TrainingModule;\n    findById(moduleId: UUID) -> TrainingModule;\n  }\n}\n\nType TrainingModuleStatus {\n  enum: [DRAFT, PENDING_REVIEW, APPROVED, PUBLISHED, ARCHIVED]\n}\n\nType TrainingModule {\n  id: UUID,\n  title: string,\n  description: string,\n  creatorId: UUID,\n  reviewerId: UUID | null,\n  status: TrainingModuleStatus,\n  createdAt: timestamp,\n  updatedAt: timestamp\n}\n\nType TrainingVersion {\n  id: UUID,\n  moduleId: UUID,\n  contentUrl: string,\n  versionNumber: string,\n  publishDate: timestamp,\n  assignedAudiences: array[map<string, any>] // e.g., [{type: 'ROLE', id: 'MANAGER'}]\n}\n</blueprint>"}