{"id": "blueprint_crud_001", "category": "crud_operations", "difficulty": "basic", "user_query": "Design a book library catalog system", "response": "<thinking>\nPROBLEM UNDERSTANDING:\n- Need a system to manage a collection of books.\n- Core functionality includes adding, retrieving, updating, and deleting book information.\n- Must be able to search for books based on title, author, or ISBN.\n- Should track book availability (e.g., checked out, available).\n\nSTRATEGIC APPROACH:\n- Design a `BookCatalogService` to encapsulate all book management logic.\n- Define a `Book` data entity to store relevant information (title, author, ISBN, etc.).\n- Implement CRUD (Create, Read, Update, Delete) methods.\n- Use a database for persistent storage.\n\nDESIGN PREPARATION:\n- A `Book` data model with fields for title, author, ISBN, publication year, and status.\n- A `BookCatalogService` with methods: `addBook`, `getBookByIsbn`, `updateBookDetails`, `removeBook`, `findBooksByAuthor`, `findBooksByTitle`.\n- A `BookDatabase` component to handle data storage operations.\n- Error handling for cases like book not found or duplicate ISBN.\n</thinking>\n\n<blueprint>\nService BookCatalogService {\n  description: \"Manages a collection of books in a library catalog.\",\n  dependencies: { storage: BookDatabase },\n  methods: {\n    addBook(title: string, author: string, isbn: string, publicationYear: int) -> Book {\n      preconditions: [isbn is unique, author and title not empty],\n      postconditions: [book is created and persisted, returns new book object],\n      errors: [DuplicateIsbn, InvalidInput]\n    },\n    getBookByIsbn(isbn: string) -> Book {\n      preconditions: [valid isbn format],\n      postconditions: [returns book object if found],\n      errors: [BookNotFound]\n    },\n    updateBookDetails(isbn: string, newTitle: string, newAuthor: string) -> Book {\n      preconditions: [book with isbn exists],\n      postconditions: [book details are updated, returns updated book object],\n      errors: [BookNotFound]\n    },\n    removeBook(isbn: string) -> void {\n      preconditions: [book with isbn exists],\n      postconditions: [book is removed from the system],\n      errors: [BookNotFound]\n    }\n  }\n}\n\nDatabase BookDatabase {\n  Table Books {\n    columns: {\n      id: {type: UUID, primaryKey: true},\n      title: {type: String, required: true},\n      author: {type: String, required: true},\n      isbn: {type: String, unique: true, required: true},\n      publicationYear: {type: Int},\n      status: {type: String, default: \"available\"}\n    }\n  }\n}\n</blueprint>"}
