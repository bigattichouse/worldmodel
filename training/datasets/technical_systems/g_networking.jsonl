{"id": "blueprint_tech_net_001", "category": "networking", "difficulty": "intermediate", "user_query": "Subnet Calculator", "response": "<thinking>\nPROBLEM UNDERSTANDING:\n- A service to calculate network details from an IP address and a subnet mask (or CIDR prefix).\n- It should calculate the network address, broadcast address, number of usable hosts, and the valid host range.\n\nSTRATEGIC APPROACH:\n- Design a `SubnetCalculator` service.\n- The method will take an IP address and subnet mask/CIDR as input.\n- It will perform bitwise operations on the IP address and mask to determine the network and broadcast addresses.\n\nDESIGN PREPARATION:\n- A `SubnetCalculator` service with a `calculate` method.\n- Input: `ipAddress: string`, `cidrPrefix: int` (e.g., 24) or `subnetMask: string` (e.g., '255.255.255.0').\n- A `SubnetDetails` result type to hold all the calculated information.\n- Error handling for invalid IP addresses or CIDR/mask formats.\n</thinking>\n\n<blueprint>\nService SubnetCalculator {\n  description: \"Calculates network details from an IP address and CIDR prefix/subnet mask.\",\n  methods: {\n    calculate(ipAddress: string, cidrPrefix: int) -> SubnetDetails {\n      preconditions: [ipAddress is a valid IPv4 address, cidrPrefix is between 1 and 32],\n      postconditions: [returns a detailed object with network address, broadcast, host range, etc],\n      errors: [InvalidIpAddress, InvalidCidrPrefix]\n    }\n  }\n}\n\nType SubnetDetails {\n  ipAddress: string,\n  cidrPrefix: int,\n  subnetMask: string,\n  networkAddress: string,\n  broadcastAddress: string,\n  numberOfHosts: int,\n  hostRangeStart: string,\n  hostRangeEnd: string\n}\n</blueprint>"}
{"id": "blueprint_tech_net_002", "category": "networking", "difficulty": "intermediate", "user_query": "DNS Lookup Service", "response": "<thinking>\nPROBLEM UNDERSTANDING:\n- A service to perform DNS lookups for a given domain name.\n- It should be able to resolve different types of DNS records, such as A (IPv4), AAAA (IPv6), CNAME, and MX (mail exchange).\n\nSTRATEGIC APPROACH:\n- Design a `DnsLookupService`.\n- The service will wrap a system's underlying DNS resolver or a DNS library.\n- It will have a method that takes a domain name and a record type and returns the results.\n\nDESIGN PREPARATION:\n- An `RecordType` enum (A, AAAA, CNAME, MX, TXT, NS).\n- A `DnsLookupService` with a `lookup` method.\n- Inputs: `domainName: string`, `recordType: RecordType`.\n- The method will return an array of strings, as there can be multiple records of the same type.\n- Error handling for `DomainNotFound` or `NoRecordsFound`.\n</king>\n\n<blueprint>\nService DnsLookupService {\n  description: \"Performs DNS lookups for various record types.\",\n  methods: {\n    lookup(domainName: string, recordType: RecordType) -> array[DnsRecord] {\n      preconditions: [domainName is a valid domain format, recordType is supported],\n      postconditions: [returns an array of DNS records found for the domain and type],\n      errors: [DomainNotFound, NoRecordsFoundForType]\n    }\n  }\n}\n\nType RecordType {\n  enum: [A, AAAA, CNAME, MX, TXT, NS, SOA]\n}\n\nType DnsRecord {\n  type: RecordType,\n  value: string,\n  ttl: int,\n  priority: int | null // Only relevant for MX records\n}\n</blueprint>"}
{"id": "blueprint_tech_net_003", "category": "networking", "difficulty": "basic", "user_query": "Ping/Health Check Service", "response": "<thinking>\nPROBLEM UNDERSTANDING:\n- A service to check the basic reachability of a network host.\n- This can be done by attempting to establish a TCP connection on a specific port (a TCP ping) rather than using ICMP, which often requires special permissions.\n- It needs a hostname or IP address and a port to check.\n\nSTRATEGIC APPROACH:\n- Design a `HealthCheckService`.\n- The `check` method will attempt to open a socket to the target host and port with a timeout.\n- Success is defined as the connection being established and then closed.\n\nDESIGN PREPARATION:\n- A `HealthCheckService` with a `checkTcp` method.\n- Inputs: `host: string`, `port: int`, `timeoutSeconds: int`.\n- A `HealthCheckResult` type to return the status, latency, and any error message.\n</thinking>\n\n<blueprint>\nService HealthCheckService {\n  description: \"Checks the reachability of a network host by attempting a TCP connection.\",\n  methods: {\n    checkTcp(host: string, port: int, timeoutSeconds: int) -> HealthCheckResult {\n      preconditions: [host is a valid hostname or IP, port is between 1 and 65535, timeoutSeconds > 0],\n      postconditions: [returns a result indicating if the connection was successful and the measured latency],\n      errors: []\n    }\n  }\n}\n\nType HealthCheckResult {\n  host: string,\n  port: int,\n  isReachable: bool,\n  latencyMilliseconds: int | null,\n  errorMessage: string | null // e.g., 'ConnectionRefused', 'Timeout', 'HostNotFound'\n}\n</blueprint>"}